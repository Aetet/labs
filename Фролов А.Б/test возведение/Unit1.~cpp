//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
        : TForm(Owner)
{
}
//---------------------------------------------------------------------------
int* c[3];
void __fastcall TForm1::Button1Click(TObject *Sender)
{
int t=Edit1->Text.Length();

c[0]=new int[t];
c[1]=new int[t];
c[2]=new int[t];

for(int i=0;i<t;i++)
{
        c[0][i]=Edit1->Text[i+1]-'0';
        c[1][i]=0;
        c[2][i]=0;
}
int a=1;
int b=2;
//c[0,i]=a^3
c[1][1]=c[1][1]+c[0][4]*a*a*a*a*a*a*a*a;
c[0][0]=c[0][0]+c[0][4]*a*a*a*a*a*a*a*b;
c[1][0]=c[1][0]-c[0][4]*a*a*a*a*a*a*b;
c[2][0]=c[2][0]+c[0][4]*a*a*a*a*a*b;
c[0][1]=c[0][1]-c[0][4]*a*a*a*a*b;
c[1][1]=c[1][1]+c[0][4]*a*a*a*b;
c[1][1]=c[1][1]+c[0][4]*a*a*b*a;
c[0][0]=c[0][0]+c[0][4]*a*a*b*b;
c[1][1]=c[1][1]+c[0][4]*a*b*a*a;
c[0][0]=c[0][0]+c[0][4]*a*b*a*b;
c[1][0]=c[1][0]-c[0][4]*a*b*b;
c[1][1]=c[1][1]+c[0][4]*b*a*a*a;
c[0][0]=c[0][0]+c[0][4]*b*a*a*b;
c[1][0]=c[1][0]-c[0][4]*b*a*b;
c[2][0]=c[2][0]+c[0][4]*b*b;
c[0][4]=0;
c[1][1]=c[1][1]-c[0][3]*a*a*a*a*a;
c[0][0]=c[0][0]-c[0][3]*a*a*a*a*b;
c[1][0]=c[1][0]+c[0][3]*a*a*a*b;
c[2][0]=c[2][0]-c[0][3]*a*a*b;
c[0][1]=c[0][1]+c[0][3]*a*b;
c[1][1]=c[1][1]-c[0][3]*b;
c[0][3]=0;
c[1][1]=c[1][1]+c[0][2]*a*a;
c[0][0]=c[0][0]+c[0][2]*a*b;
c[1][0]=c[1][0]-c[0][2]*b;
c[0][2]=0;

for(int i=0;i<t;i++)
        Edit2->Text=Edit2->Text+AnsiString((c[i%3][i/3]+30)%3);
}
//---------------------------------------------------------------------------
