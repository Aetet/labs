% dmvnsoul.sty: original soul.sty
% letterspacing/underlining/highlighting package
% modified by DMVN Corporation to avoid name confict
% Date: 06.02.2005

\expandafter\ifx\csname SOUL@\endcsname\relax\else
  \expandafter\endinput
\fi
\expandafter\ifx\csname documentclass\endcsname\relax
    \chardef\atcode=\catcode`@
    \catcode`\@=11
    \def\DeclareRobustCommand*{\def}
    \def\DeclareOption#1#2{\expandafter\def\csname#1\endcsname{#2}}
    \def\PackageError#1#2#3{{%
        \newlinechar`^^J%
        \errorcontextlines\z@
        \edef\\{\errhelp{#3}}\\%
        \errmessage{Package #1 error: #2}%
    }}
    \def\@height{height}
    \def\@depth{depth}
    \def\@width{width}
    \def\@plus{plus}
    \def\@minus{minus}
    \font\SOUL@tt=ectt1000
    \let\@xobeysp\space
    \let\linebreak\break
    \let\mbox\hbox
\else
    \NeedsTeXFormat{LaTeX2e}
    \ProvidesPackage{dmvnsoul}
        [2005/02/06 v2.31 letterspacing/underlining  (mf)]
    \newfont\SOUL@tt{ectt1000}
    \newcommand*\sodef{}
    \newcommand*\resetso{}
    \newcommand*\capsdef{}
    \newcommand*\capsfont{}
    \newcommand*\setulcolor{}
    \newcommand*\setuloverlap{}
    \newcommand*\setul{}
    \newcommand*\resetul{}
    \newcommand*\setuldepth{}
    \newcommand*\setstcolor{}
    \newcommand*\sethlcolor{}
    \newcommand*\soulso{}
    \newcommand*\soulul{}
    \newcommand*\soulst{}
    \newcommand*\soulhl{}
    \newcommand*\soulcaps{}
    \newcommand*\soulaccent{}
    \newcommand*\soulfont{}
\fi
\newtoks\SOUL@word
\newtoks\SOUL@lasttoken
\toksdef\SOUL@syllable\z@
\newtoks\SOUL@cmds
\newtoks\SOUL@buffer
\newtoks\SOUL@token
\dimendef\SOUL@syllgoal\z@
\dimendef\SOUL@syllwidth\tw@
\dimendef\SOUL@charkern=4
\dimendef\SOUL@hyphkern=6
\countdef\SOUL@minus\z@
\countdef\SOUL@comma\tw@
\countdef\SOUL@apo=4
\countdef\SOUL@grave=6
\countdef\SOUL@level=8
\newskip\SOUL@spaceskip
\newif\ifSOUL@ignorespaces
\newcommand*\soulomit{\noexpand\soulomit}
\def\SOUL@stopM{\SOUL@stop}
\let\SOUL@stop\relax
\def\SOUL@lowerthan{}
\def\SOUL@lowerthanM{\<}
\def\SOUL@hyphenhintM{\-}
\def\SOUL@n*{\let\SOUL@spc= }\SOUL@n* %
\def\SOUL@{%
    \afterassignment\SOUL@expand
    \let\SOUL@@
}
\def\SOUL@expand{%
    \ifcat\bgroup\noexpand\SOUL@@
        \bgroup
        \let\<\SOUL@lowerthan
        \gdef\SOUL@eventuallyexhyphen##1{}%
        \let\SOUL@soeventuallyskip\relax
        \SOUL@spaceskip=\fontdimen\tw@\font\@plus\fontdimen\thr@@\font
            \@minus\fontdimen4\font
        \SOUL@ignorespacesfalse
        \leavevmode
        \SOUL@preamble
        \SOUL@lasttoken={}%
        \SOUL@word={}%
        \SOUL@minus\z@
        \SOUL@comma\z@
        \SOUL@apo\z@
        \SOUL@grave\z@
        \SOUL@level\z@
        \let\SOUL@n\SOUL@scan
    \else
        \bgroup
            \def\\##1##2{\def##2{\noexpand##2}}%
            \the\SOUL@cmds
            \def\\{\noexpand\\}%
            \def~{\noexpand~}%
            \def\,{\noexpand\,}%
            \def\S{\noexpand\S}%
            \def\slash{\noexpand\slash}%
            \def\textregistered{\noexpand\textregistered}%
            \def\textcircled{\noexpand\textcircled}%
            \def\copyright{\noexpand\copyright}%
            \def\TeX{\noexpand\TeX}%
            \def\LaTeX{\noexpand\LaTeX}%
            \let\protect\noexpand
            \xdef\SOUL@n{\noexpand\SOUL@{\SOUL@@}}%
        \egroup
    \fi
    \SOUL@n
}
\def\SOUL@scan{%
    \futurelet\SOUL@@\SOUL@eval
}
\def\SOUL@eval{%
    \def\SOUL@n*##1{\SOUL@scan}%
    \if\noexpand\SOUL@@\SOUL@spc
    \else
        \SOUL@ignorespacesfalse
    \fi
    \ifnum\SOUL@minus=\thr@@
        \SOUL@doword
        \SOUL@eventuallyexhyphen{-}%
        \SOUL@exhyphen{---}%
        \SOUL@minus\z@
    \else\ifnum\SOUL@comma=\tw@
        \edef\x{\SOUL@word={\the\SOUL@word{{,,}}}}\x
        \SOUL@comma\z@
    \else\ifnum\SOUL@apo=\tw@
        \edef\x{\SOUL@word={\the\SOUL@word{{''}}}}\x
        \SOUL@apo\z@
    \else\ifnum\SOUL@grave=\tw@
        \edef\x{\SOUL@word={\the\SOUL@word{{``}}}}\x
        \SOUL@grave\z@
    \fi\fi\fi\fi
    \ifx\SOUL@@-%
        \advance\SOUL@minus\@ne
    \else\ifx\SOUL@@,%
        \advance\SOUL@comma\@ne
    \else\ifx\SOUL@@'%
        \advance\SOUL@apo\@ne
    \else\ifx\SOUL@@`%
        \advance\SOUL@grave\@ne
    \else
        \ifnum\SOUL@minus=\tw@
            \SOUL@doword
            \SOUL@eventuallyexhyphen{-}%
            \SOUL@exhyphen{--}%
            \SOUL@minus\z@
        \else\ifnum\SOUL@minus=\@ne
            \SOUL@doword
            \SOUL@eventuallyexhyphen{-}%
            \SOUL@exhyphen{-}%
            \SOUL@minus\z@
        \else\ifnum\SOUL@comma=\@ne
            \edef\x{\SOUL@word={\the\SOUL@word,}}\x
            \SOUL@comma\z@
        \else\ifnum\SOUL@apo=\@ne
            \edef\x{\SOUL@word={\the\SOUL@word'}}\x
            \SOUL@apo\z@
        \else\ifnum\SOUL@grave=\@ne
            \edef\x{\SOUL@word={\the\SOUL@word`}}\x
            \SOUL@grave\z@
        \fi\fi\fi\fi\fi
        \ifcat\egroup\noexpand\SOUL@@
            \SOUL@doword
            \ifnum\SOUL@level>\z@
                \egroup
                \def\SOUL@n*{\afterassignment\SOUL@scan\let\SOUL@}%
            \else
                \SOUL@eventuallyexhyphen\null
                \def\SOUL@n*{\SOUL@postamble}%
            \fi
        \else\ifx\SOUL@@\par
            \def\SOUL@n*\par{\par\leavevmode\SOUL@scan}%
        \else\if\noexpand\SOUL@@\SOUL@spc
            \SOUL@doword
            \SOUL@eventuallyexhyphen\null
            \ifSOUL@ignorespaces
            \else
                \SOUL@everyspace{}%
            \fi
            \def\SOUL@n* {\SOUL@scan}%
        \else\ifx\SOUL@@\\%
            \SOUL@doword
            \SOUL@eventuallyexhyphen\null
            \SOUL@everyspace{\unskip\nobreak\hfil\break}%
            \SOUL@ignorespacestrue
        \else\ifx\SOUL@@~%
            \SOUL@doword
            \SOUL@eventuallyexhyphen\null
            \SOUL@everyspace{\nobreak}%
        \else\ifx\SOUL@@\slash
            \SOUL@doword
            \SOUL@eventuallyexhyphen{/}%
            \SOUL@exhyphen{/}%
        \else\ifx\SOUL@@\mbox
            \def\SOUL@n*{\SOUL@addprotect}%
        \else\ifx\SOUL@@\hbox
            \def\SOUL@n*{\SOUL@addprotect}%
        \else\ifx\SOUL@@\soulomit
            \def\SOUL@n*\soulomit##1{%
                \SOUL@doword
                {\spaceskip\SOUL@spaceskip##1}%
                \SOUL@scan
            }%
        \else\ifx\SOUL@@\break
            \SOUL@doword
            \break
        \else\ifx\SOUL@@\linebreak
            \SOUL@doword
            \SOUL@everyspace{\linebreak}%
        \else\ifcat\bgroup\noexpand\SOUL@@
            \def\SOUL@n*{\SOUL@addgroup{}}%
        \else\ifcat$\noexpand\SOUL@@
            \def\SOUL@n*{\SOUL@addmath}%
        \else
            \def\SOUL@n*{\SOUL@dotoken}%
        \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi
    \fi\fi\fi\fi
    \SOUL@n*%
}
\def\SOUL@dotoken#1{%
    \def\SOUL@@{\SOUL@addtoken{#1}}%
    \def\\##1##2{%
        \edef\SOUL@x{\string#1}%
        \edef\SOUL@n{\string##2}%
        \ifx\SOUL@x\SOUL@n
            \def\SOUL@@{\SOUL@docmd{##1}{#1}}%
        \else
            \edef\SOUL@n{\string##2\space}%
            \ifx\SOUL@x\SOUL@n
                \def\SOUL@@{\SOUL@docmd{##1}{#1}}%
            \fi
        \fi
    }%
    \the\SOUL@cmds
    \SOUL@@
}
\def\SOUL@docmd#1#2{%
    \ifx9#1%
        \def\SOUL@@{\SOUL@addgroup{#2}}%
    \else\ifx1#1%
        \SOUL@doword
        \def\SOUL@@{\SOUL@dofont{#2}}%
    \else
        \SOUL@doword
        #2%
        \def\SOUL@@{\SOUL@scan}%
    \fi\fi
    \SOUL@@
}
\def\SOUL@dofont#1{%
    #1%
    \bgroup
    \advance\SOUL@level\@ne
    \afterassignment\SOUL@scan
    \let\SOUL@
}
\def\SOUL@addgroup#1#2{%
    {\let\protect\noexpand
    \edef\x{\global\SOUL@word={\the\SOUL@word{{\noexpand#1#2}}}}\x}%
    \SOUL@scan
}
\def\SOUL@addmath$#1${%
    {\let\protect\noexpand
    \edef\x{\global\SOUL@word={\the\SOUL@word{{\hbox{$#1$}}}}}\x}%
    \SOUL@scan
}
\def\SOUL@addprotect#1#2{%
    {\let\protect\noexpand
    \edef\x{\global\SOUL@word={\the\SOUL@word{{\hbox{#2}}}}}\x}%
    \SOUL@scan
}
\def\SOUL@addtoken#1{%
    \edef\x{\SOUL@word={\the\SOUL@word\noexpand#1}}\x
    \SOUL@scan
}
\def\SOUL@exhyphen#1{%
    \SOUL@getkern{\the\SOUL@lasttoken}{\SOUL@hyphkern}{#1}%
    \gdef\SOUL@eventuallyexhyphen##1{%
        \SOUL@getkern{#1}{\SOUL@charkern}{##1}%
        \SOUL@everyexhyphen{#1}%
        \gdef\SOUL@eventuallyexhyphen####1{}%
    }%
}
\SOUL@cmds={%
    \\9\`\\9\'\\9\^\\9\"\\9\~\\9\=\\9\.%
    \\9\u\\9\v\\9\H\\9\t\\9\c\\9\d\\9\b
    \\1\emph\\1\textrm\\1\textsf\\1\texttt\\1\textmd\\1\textbf
    \\1\textup\\1\textsl\\1\textit\\1\textsc\\1\textnormal
    \\0\rmfamily\\0\sffamily\\0\ttfamily\\0\mdseries\\0\upshape
    \\0\slshape\\0\itshape\\0\scshape\\0\normalfont
    \\0\em\\0\rm\\0\bf\\0\it\\0\tt\\0\sc\\0\sl\\0\sf
    \\0\tiny\\0\scriptsize\\0\footnotesize\\0\small
    \\0\normalsize\\0\large\\0\Large\\0\LARGE\\0\huge\\0\Huge
    \\1\textfrak\\1\textswab\\1\textgoth
    \\0\frakfamily\\0\swabfamily\\0\gothfamily
}
\def\soulfont#1#2{{%
    \edef\x{\global\SOUL@cmds={\the\SOUL@cmds
        \noexpand\\#2\noexpand#1}}\x
}}
\def\soulaccent#1{\soulfont{#1}9}
\def\SOUL@doword{%
    \edef\x{\the\SOUL@word}%
    \ifx\x\empty
    \else
        \SOUL@buffer={}%
        \setbox\z@\vbox{%
            \SOUL@tt
            \hyphenchar\font`\-
            \hfuzz\maxdimen
            \hbadness\@M
            \pretolerance\m@ne
            \tolerance\@M
            \leftskip\z@
            \rightskip\z@
            \hsize1sp
            \everypar{}%
            \parfillskip\z@\@plus1fil
            \hyphenpenalty-\@M
            \noindent
            \hskip\z@
            \relax
            \the\SOUL@word}%
        \let\SOUL@errmsg\SOUL@error
        \let\-\relax
        \count@\m@ne
        \SOUL@analyze
        \SOUL@word={}%
    \fi
}
\setbox\z@\hbox{\SOUL@tt-}
\newdimen\SOUL@ttwidth
\SOUL@ttwidth\wd\z@
\def\SOUL@analyz                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             